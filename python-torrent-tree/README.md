# python-torrent-tree

来源：https://github.com/grantUser/python-torrent-tree

优化了其他语言的输出，增加了基本的命令行互动功能，优化体验。

用法：

```powershell
# 如果没有安装过 bencode.py
pip install bencode.py
# 运行程序
python torrent_parser.py
```

## 样例

```json
PS D:\Video\torrent> python .\torrent_parser.py
输入Torrent文件路径：s4667.torrent
{
  "[Snow-Raws] そらのおとしものf[フォルテ]": {
    "[Snow-Raws] そらのおとしものf[フォルテ] 第01話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1807244349,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第02話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1845941503,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第03話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 2012186249,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第04話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1737666172,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第05話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1676025054,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第06話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1685256173,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第07話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1850239983,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第08話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1758662032,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第09話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1497744894,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第10話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1343352926,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第11話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1579451144,
    "[Snow-Raws] そらのおとしものf[フォルテ] 第12話(BD 1920x1080 HEVC-YUV420P10 FLACx2).mkv": 1390658326,
    "映像特典": {
      "[Snow-Raws] そらのおとしものf[フォルテ] CM01(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 31615209,
      "[Snow-Raws] そらのおとしものf[フォルテ] CM02(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 32216217,
      "[Snow-Raws] そらのおとしものf[フォルテ] CM03(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 25546298,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU01(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 9265709,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU02(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 9118737,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU03(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 8496484,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU04(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 8748018,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU05(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 10802966,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU06(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 10373027,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU07(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 11934402,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU08(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 12353283,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU09(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 10379625,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU10(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 10699775,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU11(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 9894546,
      "[Snow-Raws] そらのおとしものf[フォルテ] MENU12(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 10291858,
      "[Snow-Raws] そらのおとしものf[フォルテ] SP01(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 520083419,
      "[Snow-Raws] そらのおとしものf[フォルテ] SP02(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 289139533,
      "[Snow-Raws] そらのおとしものf[フォルテ] SP03(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 146292040,
      "[Snow-Raws] そらのおとしものf[フォルテ] SP04(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 157016711,
      "[Snow-Raws] そらのおとしものf[フォルテ] SP05(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 179551206,
      "[Snow-Raws] そらのおとしものf[フォルテ] SP06(BD 1920x1080 HEVC-YUV420P10 FLAC).mkv": 535416716
    }
  }
}
输入Torrent文件路径： # 将循环提问，直到您手动退出。 
```



---------------

This is a Python script that parses a torrent file and extracts file data from it. It can build a tree-like structure of the files and directories present in the torrent.

## Requirements

- Python 3.x
- bencodepy (a library to parse bencoded data) - You can install it using `pip install bencode.py`.

## Usage

1. Place the `test.torrent` file in the same directory as the script.

2. Run the script `torrent_parser.py`.

3. The script will read the `test.torrent` file, extract the file data, and build a tree-like structure representing the files and directories.

4. The resulting tree structure will be printed in JSON format.

## Function Documentation

### parse_torrent(torrent_file_path: str) -> list[dict]

Parse the torrent file and extract the file data.

Parameters:
- `torrent_file_path` (str): The path to the torrent file.

Returns:
- `list[dict]`: A list of dictionaries, each containing the 'path' and 'length' of a file.

### build_path_tree(file_data_list: list[dict]) -> dict

Build the tree-like structure out of the file data.

Parameters:
- `file_data_list` (list[dict]): A list of dictionaries, each containing the 'path' and 'length' of a file.

Returns:
- `dict`: A dictionary representing the tree-like structure of the files and directories, with the file lengths as values.

## Exemple:

```json
{
  "Mushoku Tensei II - Isekai Ittara Honki Dasu [TV-2] [2023] [WEBRip] [1080p] [RUS + JAP]": {
    "Mushoku Tensei II - 00 (WEBRip 1920x1080 x264 AAC Rus + Jap).mkv": 1076851686,
    "Mushoku Tensei II - 01 (WEBRip 1920x1080 x264 AAC Rus + Jap).mkv": 1076777825,
    "Mushoku Tensei II - 02 (WEBRip 1920x1080 x264 AAC Rus + Jap).mkv": 1303506293,
    "Mushoku Tensei II - 03 (WEBRip 1920x1080 x264 AAC Rus + Jap).mkv": 1029535452
  }
}
```
